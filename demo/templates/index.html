{% extends "base.html" %}
{% block content %}
<div class="grid">
  <!-- LEFT: product list + create form -->
  <div>
    <div class="card" style="margin-bottom:1rem;">
      <h2>âž• Add Product</h2>
      <form hx-post="/ui/products" hx-target="#product-list" hx-swap="innerHTML"
            hx-on::after-request="if(event.detail.successful) this.reset()">
        <label for="name">Name</label>
        <input id="name" name="name" required placeholder="Wireless Mouse">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;">
          <div><label for="brand">Brand</label><input id="brand" name="brand" required placeholder="Acme"></div>
          <div><label for="category">Category</label><input id="category" name="category" required placeholder="gadgets"></div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;">
          <div><label for="price">Price</label><input id="price" name="price" type="number" step="0.01" required placeholder="29.99"></div>
          <div><label for="tags">Tags <span style="color:var(--muted)">(comma-sep)</span></label><input id="tags" name="tags" placeholder="electronics, accessories"></div>
        </div>
        <label for="description">Description</label>
        <textarea id="description" name="description" placeholder="Optional descriptionâ€¦"></textarea>
        <button class="btn btn-primary" type="submit">Create Product</button>
      </form>
    </div>

    <div class="card">
      <h2>ðŸ“¦ Products</h2>
      <div class="filter-bar">
        <input name="category" placeholder="Filter categoryâ€¦"
               hx-get="/ui/products" hx-target="#product-list" hx-trigger="keyup changed delay:300ms"
               hx-include="[name='brand']">
        <input name="brand" placeholder="Filter brandâ€¦"
               hx-get="/ui/products" hx-target="#product-list" hx-trigger="keyup changed delay:300ms"
               hx-include="[name='category']">
      </div>
      <div id="product-list" hx-get="/ui/products" hx-trigger="load" hx-swap="innerHTML">
        <div class="empty">Loadingâ€¦</div>
      </div>
    </div>
  </div>

  <!-- RIGHT: detail + reviews -->
  <div id="detail-panel">
    <div class="card">
      <div class="empty">Select a product to see details &amp; reviews</div>
    </div>
  </div>
</div>
{% endblock %}
